<!DOCTYPE html>
<html lang="zh-TW">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Firebase æ¸¬è©¦ç™»å…¥é é¢</title>
Â  Â  
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
Â  Â  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
Â  Â  
Â  Â  <style>
Â  Â  Â  Â  /* ... æ¨£å¼ä¿æŒä¸è®Š ... */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: Arial, sans-serif;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  background-color: #f4f7f6;
Â  Â  Â  Â  }
Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  background-color: #ffffff;
Â  Â  Â  Â  Â  Â  padding: 30px;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  max-width: 400px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  h2 {
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  Â  }
Â  Â  Â  Â  input[type="email"], input[type="password"] {
Â  Â  Â  Â  Â  Â  width: calc(100% - 20px);
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }
Â  Â  Â  Â  button {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  margin-bottom: 10px;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  font-size: 16px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  transition: background-color 0.3s;
Â  Â  Â  Â  }
Â  Â  Â  Â  #loginBtn { background-color: #4CAF50; color: white; }
Â  Â  Â  Â  #logoutBtn { background-color: #f44336; color: white; }
Â  Â  Â  Â  button:hover { opacity: 0.9; }
Â  Â  Â  Â  #status {
Â  Â  Â  Â  Â  Â  margin-top: 20px;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  background-color: #e0e0e0;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  }
Â  Â  Â  Â  .hidden { display: none; }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="container">
Â  Â  Â  Â  <h2>Firebase ç¶²é ç™»å…¥</h2>

Â  Â  Â  Â  <div id="authArea">
Â  Â  Â  Â  Â  Â  <input type="email" id="emailInput" placeholder="é›»å­éƒµä»¶" required>
Â  Â  Â  Â  Â  Â  <input type="password" id="passwordInput" placeholder="å¯†ç¢¼" required>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <button id="loginBtn">ç™»å…¥</button>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="profileArea" class="hidden">
Â  Â  Â  Â  Â  Â  <p><strong>ç™»å…¥æˆåŠŸï¼Œæ­£åœ¨å°å‘è‡³ç§äººé é¢...</strong></p>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div id="status">ç­‰å¾…ä½¿ç”¨è€…ç™»å…¥...</div>

Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // ğŸš¨ æ­¥é©Ÿ 1: é…ç½®æ‚¨çš„ Firebase è¨­å®š ğŸš¨
Â  Â  Â  Â  const firebaseConfig = {
Â  Â  Â  Â  apiKey: "AIzaSyACnoimIASfb1rb59SbgLDkUmyYR6ODbUU",
Â  Â  Â  Â  authDomain: "llwb-ed686.firebaseapp.com",
Â  Â  Â  Â  projectId: "llwb-ed686",
Â  Â  Â  Â  storageBucket: "llwb-ed686.firebasestorage.app",
Â  Â  Â  Â  messagingSenderId: "940345852074",
Â  Â  Â  Â  appId: "1:940345852074:web:7a30cca5a6d997a92350d3",
Â  Â  Â  Â  measurementId: "G-KWL4ZE3D18"
Â  Â  Â  Â  };
Â  Â  Â  Â  
Â  Â  Â  Â  const app = firebase.initializeApp(firebaseConfig);
Â  Â  Â  Â  const auth = firebase.auth();

Â  Â  Â  Â  // âœ… ä¿®æ­£é» 1: PRIVATE_PAGE_URL è®Šæ•¸å¿…é ˆæ˜¯æ­£ç¢ºçš„ Firebase Hosting ç¶²å€
Â  Â  Â  Â  const PRIVATE_PAGE_URL = 'https://llwb-ed686.web.app/private.html'; 

Â  Â  Â  Â  // ç²å– DOM å…ƒç´ 
Â  Â  Â  Â  const emailInput = document.getElementById('emailInput');
Â  Â  Â  Â  const passwordInput = document.getElementById('passwordInput');
Â  Â  Â  Â  const loginBtn = document.getElementById('loginBtn');
Â  Â  Â  Â  const statusDiv = document.getElementById('status');

Â  Â  Â  Â  function updateStatus(message, isError = false) {
Â  Â  Â  Â  Â  Â  statusDiv.textContent = message;
Â  Â  Â  Â  Â  Â  statusDiv.style.backgroundColor = isError ? '#fdd' : '#ddf';
Â  Â  Â  Â  }

Â  Â  Â  Â  // --- ç™»å…¥è™•ç†å‡½æ•¸ ---
Â  Â  Â  Â  loginBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  const email = emailInput.value;
Â  Â  Â  Â  Â  Â  const password = passwordInput.value;

Â  Â  Â  Â  Â  Â  if (!email || !password) {
Â  Â  Â  Â  Â  Â  Â  Â  updateStatus("è«‹è¼¸å…¥é›»å­éƒµä»¶å’Œå¯†ç¢¼ã€‚", true);
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  auth.signInWithEmailAndPassword(email, password)
Â  Â  Â  Â  Â  Â  Â  Â  .then((userCredential) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // æˆåŠŸç™»å…¥å¾Œï¼Œç‹€æ…‹ç›£è½å™¨ (onAuthStateChanged) å°‡æœƒè§¸ç™¼é‡å®šå‘
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateStatus("ç™»å…¥æˆåŠŸï¼Œæ­£åœ¨é‡å®šå‘...");
Â  Â  Â  Â  Â  Â  Â  Â  })
Â  Â  Â  Â  Â  Â  Â  Â  .catch((error) => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  updateStatus(`ç™»å…¥å¤±æ•—: ${error.message}`, true);
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  });

Â  Â  Â  Â  // ğŸ’¡ é—œéµé‚è¼¯: ç›£è½ä½¿ç”¨è€…ç‹€æ…‹è®ŠåŒ–ä¸¦åŸ·è¡Œé‡å®šå‘ ğŸ’¡
Â  Â  Â  Â  auth.onAuthStateChanged((user) => {
Â  Â  Â  Â  Â  Â  if (user) {
Â  Â  Â  Â  Â  Â  Â  Â  // ä½¿ç”¨è€…å·²ç™»å…¥

Â  Â  Â  Â  Â  Â  Â  Â  // æª¢æŸ¥ç›®å‰æ˜¯å¦åœ¨ç™»å…¥é é¢ (login.html æˆ– root index)
Â  Â  Â  Â  Â  Â  Â  Â  if (window.location.pathname.endsWith('login.html') || window.location.pathname.endsWith('index.html') || window.location.pathname.endsWith('/')) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // âœ… ä¿®æ­£é» 2: ä¿®æ­£é‡å®šå‘èªæ³•ï¼Œç›´æ¥ä½¿ç”¨è®Šæ•¸ PRIVATE_PAGE_URL
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = PRIVATE_PAGE_URL;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // ä½¿ç”¨è€…å·²ç™»å‡º (æˆ–æœªç™»å…¥)

Â  Â  Â  Â  Â  Â  Â  Â  // æª¢æŸ¥ç›®å‰æ˜¯å¦åœ¨ç§äººé é¢ (é€™æ˜¯ index.html æˆ– login.html çš„ onAuthStateChanged çš„å®‰å…¨ç¶²)
Â  Â  Â  Â  Â  Â  Â  Â  if (window.location.href.includes(PRIVATE_PAGE_URL)) { 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // å¦‚æœåœ¨ç§äººé é¢ï¼Œä½†æœªç™»å…¥ï¼Œå‰‡å°å› login.html 
                    // ğŸš¨ æ³¨æ„: login.html æ‡‰è©²åœ¨æ‚¨ GitHub Pages çš„æ ¹ç›®éŒ„æˆ–èˆ‡ index.html åŒç´š
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  window.location.href = 'login.html'; 
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  Â  Â  // å¦‚æœç›®å‰å°±åœ¨ç™»å…¥é é¢ï¼Œå‰‡ä¸åŸ·è¡Œä»»ä½•æ“ä½œ
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  </script>
</body>
</html>
